<div class="giiker-about-us-step-container" style="background-color: {{ section.settings.background_color }};">
  <div class="giiker-about-us-step-content">
    <div class="giiker-about-us-step-list">
      <div class="step-swiper swiper">
        <div class="swiper-wrapper">
        {% for block in section.blocks %}
          <div class="giiker-about-us-our-story-item swiper-slide" data-title="{{ block.settings.step_number | strip_html }}">
            <div class="top-image-tag">
              <div class="giiker-about-us-our-story-item-image">
                {{ block.settings.image | image_url: width: block.settings.image.width | image_tag: height: block.settings.image.height, fetchpriority: 'high', loading: 'lazy', class: 'image-tag' }}
              </div>
              <div class="giiker-about-us-our-story-item-content">
                <h3 class="giiker-about-us-our-story-item-content-title">{{ block.settings.title }}</h3>
                <div class="giiker-about-us-our-story-item-content-detail">{{ block.settings.detail }}</div>
              </div>
            </div>
            <div class="bottom-image-tag">
              <div class="giiker-about-us-our-story-item-image">
                {{ block.settings.image | image_url: width: block.settings.image.width | image_tag: height: block.settings.image.height, fetchpriority: 'high', loading: 'lazy', class: 'image-tag' }}
              </div>
              <div class="giiker-about-us-our-story-item-content">
                <h3 class="giiker-about-us-our-story-item-content-title">{{ block.settings.title }}</h3>
                <div class="giiker-about-us-our-story-item-content-detail">{{ block.settings.detail }}</div>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
        <div class="swiper-pagination"></div>
      </div>
    </div>

  </div> 
</div>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const swiperContainer = document.querySelector('#shopify-section-{{ section.id }} .our-story-swiper');
    const slides = swiperContainer.querySelectorAll('.swiper-slide');
    const titles = Array.from(slides).map(slide => slide.getAttribute('data-title'));
    
    const ourStorySwiper = new Swiper('#shopify-section-{{ section.id }} .our-story-swiper', {
      slidesPerView: 1,
      spaceBetween: 20,
      pagination: {
        el: '#shopify-section-{{ section.id }} .swiper-pagination',
        clickable: true,
        renderBullet: function (index, className) {
          return '<span class="' + className + '">' + (titles[index] || '') + '</span>';
        },
      },
    });
  });
</script>
{% schema %}
{
  "name": "Giiker about us step",
  "settings": [
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color"
    }
  ],
  "blocks": [
    {
      "type": "step",
      "name": "Step",
      "settings": [
        {
          "type": "text",
          "id": "step_number",
          "label": "Step Number"
        },
        {
          "type": "image_picker",
          "id": "image_top",
          "label": "Image Top 879*495"
        },
        {
          "type": "richtext",
          "id": "title_top",
          "label": "Title Top"
        },
        {
          "type": "richtext",
          "id": "next_title_top",
          "label": "Next Title Top"
        },
        {
          "type": "richtext",
          "id": "detail_top",
          "label": "Detail Top"
        },
        {
          "type": "image_picker",
          "id": "image_bottom",
          "label": "Image Bottom 574*383 带圆角"
        },
        {
          "type": "richtext",
          "id": "title_bottom",
          "label": "Title Bottom"
        },
        {
          "type": "richtext",
          "id": "detail_bottom",
          "label": "Detail Bottom"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Giiker about us step"
    }
  ]
}
{% endschema %}