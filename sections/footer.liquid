{%- render 'custom-colors', id: section.id, background: section.settings.custom_background, text: section.settings.custom_text -%}

<div id="section-{{ section.id }}" class="site-footer site-box-container">

  <div class="footer-container">

    {%- if section.blocks.size > 0 -%}

      <div class="footer-top" data-size="{{ section.blocks.size }}">

        {%- for block in section.blocks -%}

          <div class="footer-item" data-type="{{ block.type }}" {{ block.shopify_attributes }}>

            {%- if block.settings.title -%}
              <h4 class="title h6">{{ block.settings.title | escape }}</h4>
            {%- endif -%}

            {%- case block.type -%}

              {%- when 'text' -%}
                <div class="footer-content rte {{ block.settings.size }}">
                  {{ block.settings.content }}
                </div>

              {%- when 'menu' -%}
                <nav class="footer-menu text-size--smaller">
                  {%- for link in linklists[block.settings.menu].links -%}
                    <span>
                      <a href="{{ link.url | escape }}"><span class="underline-animation">{{ link.title | escape }}</span></a>
                    </span>
                  {%- endfor -%}
                </nav>
              {%- when 'form' -%}
                <div class="newsletter-form" {{ block.shopify_attributes }}>
                  <h4 class="form-title">{{ block.settings.form_title }}</h4>
                  {%- form 'customer', id: 'newsletter-section', class: 'newsletter-form' -%}
                    {%- render 'form-errors', form: form -%}
                    {%- if form.posted_successfully? -%}
                      <div class="alert alert--success">{{ 'general.newsletter.confirmation' | t }}</div>
                    {%- else -%}
                      <div class="input-group">
                        <input type="email" value="{% if customer %}{{ customer.email }}{% endif %}" placeholder="{{ 'general.newsletter.email_label' | t }}" name="contact[email]" id="Email-{{ section.id }}" aria-label="{{ 'general.newsletter.email_label' | t }}" autocorrect="off" autocapitalize="off" required>
                        <button class="button button--solid" type="submit" name="commit" id="Subscribe-{{ section.id }}">
                          {% comment %} <span class="button-scroll-in">{{ 'general.newsletter.submit' | t }}</span> {% endcomment %}
                          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                          <g clip-path="url(#clip0_254_57)">
                          <path d="M4.68571 4.68571C7.80951 1.5619 11.9043 0 15.9991 0C20.0939 0 24.1888 1.5619 27.3126 4.68571C30.4364 7.80951 31.9983 11.9043 31.9983 15.9991C31.9983 20.0939 30.4364 24.1888 27.3126 27.3126C24.1888 30.4364 20.0939 31.9983 15.9991 31.9983C11.9043 31.9983 7.80951 30.4364 4.68571 27.3126C1.5619 24.1888 0 20.0939 0 15.9991C0 11.9043 1.5619 7.80951 4.68571 4.68571ZM15.9991 3.62313C12.8321 3.62313 9.66341 4.83084 7.24799 7.24799C4.83084 9.66514 3.62313 12.8321 3.62313 15.9991C3.62313 19.1661 4.83084 22.3349 7.24799 24.7503C9.66514 27.1674 12.8321 28.3751 15.9991 28.3751C19.1661 28.3751 22.3349 27.1674 24.7503 24.7503C27.1674 22.3331 28.3751 19.1661 28.3751 15.9991C28.3751 12.8321 27.1674 9.66341 24.7503 7.24799C22.3331 4.83084 19.1661 3.62313 15.9991 3.62313Z" fill="black"/>
                          <path d="M14.788 10.6914C14.0814 9.98474 14.0814 8.8375 14.788 8.12911C15.4947 7.42246 16.6419 7.42246 17.3503 8.12911L23.94 14.7188C24.6467 15.4255 24.6467 16.5727 23.94 17.2811L17.3503 23.8708C16.6437 24.5775 15.4964 24.5775 14.788 23.8708C14.0814 23.1642 14.0814 22.0169 14.788 21.3085L20.0975 16.0008L14.788 10.6931V10.6914Z" fill="black"/>
                          <path d="M22.6579 14.1885C23.6583 14.1885 24.4703 14.9988 24.4703 16.0009C24.4703 17.0013 23.66 17.8133 22.6579 17.8133H9.34197C8.34159 17.8133 7.52954 17.003 7.52954 16.0009C7.52954 15.0005 8.33986 14.1885 9.34197 14.1885H22.6579Z" fill="black"/>
                          </g>
                          <defs>
                          <clipPath id="clip0_254_57">
                          <rect width="32" height="32" fill="white"/>
                          </clipPath>
                          </defs>
                          </svg> 
                        </button>
                      </div>
                        <input type="hidden" name="contact[tags]" value="newsletter">
                    {%- endif -%}
                  {%- endform -%}
                </div>
              {%- when 'social' -%}
                <nav class="text-size--smaller">
                  {%- render 'social-icons', type: 'footer' -%}
                </nav>

              {%- when 'image' -%}
                <div class="footer-image">
                  {%- if block.settings.image -%}
                    {%- render 'lazy-image', image: block.settings.image, sizes: 'sizes="25vw"' -%}
                  {%- else -%}
                    <span>{{ 'image' | placeholder_svg_tag }}</span>
                  {%- endif -%}
                </div>

            {%- endcase -%}

          </div>

        {%- endfor -%}

      </div>

    {%- endif -%}

    <div class="footer-bottom">

      {%- if section.settings.custom_text != "rgba(0,0,0,0)" -%}
        <style>
          {%- assign main_text = section.settings.custom_text -%}
          .site-footer .regular-select-cover {
            background-image: url("data:image/svg+xml,%0A%3Csvg width='14' height='9' viewBox='0 0 14 9' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8.42815 7.47604L7.01394 8.89025L0.528658 2.40497L1.94287 0.990753L8.42815 7.47604Z' fill='{{ main_text | color_to_rgb }}'/%3E%3Cpath d='M6.98591 8.89025L5.5717 7.47604L12.057 0.990755L13.4712 2.40497L6.98591 8.89025Z' fill='{{ main_text | color_to_rgb }}'/%3E%3C/svg%3E%0A");
          }
        </style>
      {%- endif -%}

      {%- liquid 

        if section.settings.show_country_selector and shop.enabled_currencies.size > 1
          assign country_selector = true
        endif

        if section.settings.show_locale_selector and shop.published_locales.size > 1
          assign locale_selector = true
        endif 

        if country_selector or locale_selector
          render 'localization-form', country_selector: country_selector, locale_selector: locale_selector
        endif

      -%}

      <div class="footer-copyright">
        {%- if section.settings.show_payment_icons and shop.enabled_payment_types != empty -%}
          <div class="site-payment" aria-label="{{ 'general.payment_methods' | t }}">
            {%- for type in shop.enabled_payment_types -%}
              {{ type | payment_type_svg_tag: class: 'payment-icon' }}
            {%- endfor -%}
          </div>
        {%- endif -%}
        <span class="site-copyright text-size--smaller">
          <span class="copyright-text">{{ 'general.copyright' | t }} &copy; {{ 'now' | date: "%Y" }} <a href="{{ routes.root_url }}">{{ shop.name | escape }}</a><span class="powered-by-shopify">.</span></span>
        </span>
      </div>

    </div>

  </div>

</div>

<div class="giraffly-trust-badge" ></div>

{% schema %}
  {
    "name": "t:sections.footer.name",
    "max_blocks": 4,
    "settings": [
      {
        "type": "checkbox",
        "id": "show_payment_icons",
        "label": "t:sections.footer.settings.show_payment_icons.label",
        "default": true
      },
      {
        "type": "header",
        "content": "t:sections.footer.settings.language_selector.content",
        "info": "t:sections.footer.settings.language_selector.info"
      },
      {
        "type": "checkbox",
        "id": "show_locale_selector",
        "label": "t:sections.footer.settings.language_selector_show.label",
        "default": false
      },
      {
        "type": "header",
        "content": "t:sections.footer.settings.country_selector.content",
        "info": "t:sections.footer.settings.country_selector.info"
      },
      {
        "type": "checkbox",
        "id": "show_country_selector",
        "label": "t:sections.footer.settings.country_selector_show.label",
        "default": false
      },
      {
        "type": "header",
        "content": "t:sections.split-extra-words.settings_schema.colors.headings.custom_colors"
      },
      {
        "type": "color",
        "id": "custom_background",
        "label": "t:sections.split-extra-words.settings_schema.colors.settings.background",
        "default": "rgba(0,0,0,0)"
      },
      {
        "type": "color",
        "id": "custom_text",
        "label": "t:sections.split-extra-words.settings_schema.colors.settings.text",
        "default": "rgba(0,0,0,0)"
      }
    ],
    "blocks": [
      {
        "type": "text",
        "name": "t:sections.footer.blocks.text.name",
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "t:sections.footer.blocks.text.settings.title.label",
            "default": "Contact information"
          },
          {
            "type": "richtext",
            "id": "content",
            "label": "t:sections.footer.blocks.text.settings.content.label",
            "default": "<p>Write a short statement about your brand.</p>"
          },
          {
            "type": "select",
            "id": "size",
            "label": "t:sections.footer.blocks.text.settings.text_size.label",
            "options": [
              {
                "value": "",
                "label": "t:sections.footer.blocks.text.settings.text_size.options__1.label"
              },
              {
                "value": "text-size--large",
                "label": "t:sections.footer.blocks.text.settings.text_size.options__2.label"
              }
            ],
            "default": "text-size--large"
          }
        ]
      },
      {
        "type": "menu",
        "name": "t:sections.split-extra-words.sections.footer.blocks.menu.name",
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "t:sections.footer.blocks.text.settings.title.label",
            "default": "Quick links"
          },
          {
            "type": "link_list",
            "id": "menu",
            "label": "t:sections.split-extra-words.sections.footer.blocks.menu.label",
            "default": "footer",
            "info": "t:sections.footer.blocks.menus.settings.menu_1.info"
          }
        ]
      },
      {
        "type": "form",
        "name": "form",
        "settings": [
          {
            "type": "text",
            "id": "form_title",
            "label": "Join la Comunidad!",
            "default": "Join la Comunidad!"
          }
        ]
      },
      {
        "type": "social",
        "name": "t:sections.footer.blocks.social.name",
        "limit": 1,
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "t:sections.footer.blocks.text.settings.title.label",
            "default": "Follow us"
          }
        ]
      },
      {
        "type": "image",
        "name": "t:sections.footer.blocks.image.name",
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "t:sections.footer.blocks.text.settings.title.label",
            "default": "Trust badge"
          },
          {
            "type": "image_picker",
            "id": "image",
            "label": "t:sections.footer.blocks.image.settings.image.label"
          }
        ]
      }
    ]
  }
{% endschema %}