<div class="giiker-product-recommended-container" style="">
  <div class="giiker-product-recommended-background">
    {{
      section.settings.background_image
      | image_url: width: section.settings.background_image.width
      | image_tag: height: section.settings.background_image.height,
        fetchpriority: 'high', loading: 'lazy', class: 'image-tag-background',
        data-cc-animate: 'fade-in'
    }}
  </div>
  <h2 class="giiker-product-recommended-title">{{ section.settings.title }}</h2>
  <div class="giiker-product-recommended-list swiper" data-cc-animate="fade-in">
    <div class="swiper-wrapper">  
    {% assign recommended_products = product.metafields.custom.recommended_products.value %}
    {% if recommended_products != blank %}
      {% for item in recommended_products %}
        {% assign product_obj = item %}
          {% if product_obj != blank and product_obj.featured_image != blank %}
            <div class="giiker-product-recommended-item swiper-slide" >
              <div class="giiker-product-recommended-item-content">
                <div class="giiker-product-recommended-item-content-icon">
                  <a href="{{ product_obj.url }}">
                    {{
                      product_obj.featured_image
                      | image_url: width: product_obj.featured_image.width
                      | image_tag: height: product_obj.featured_image.height,
                        fetchpriority: 'high', loading: 'lazy', class: 'image-tag'
                    }}
                  </a>
                </div>
                <a href="{{ product_obj.url }}">
                  <h2 class="giiker-product-recommended-item-title">{{ product_obj.title }}</h2>
                  <div class="giiker-product-recommended-item-price">{{ product_obj.price | money }}</div>
                </a>
              </div>
            </div>
          {% endif %}
        {% endfor %}
      {% endif %}
    </div>
    <div class="swiper-button-next">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M10.6667 12L6.33333 8L10.6667 4" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
    <div class="swiper-button-prev">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M5.33333 4L9.66667 8L5.33333 12" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const swiperProductRecommended = new Swiper('#shopify-section-{{ section.id }} .swiper', {
      slidesPerView: 4,
      spaceBetween: 15,
      loop: true,
      navigation: {
        nextEl: '#shopify-section-{{ section.id }} .swiper-button-next',
        prevEl: '#shopify-section-{{ section.id }} .swiper-button-prev',
      },
      breakpoints: {
        0: {
          slidesPerView: 1.2,
          spaceBetween: 10,
        },
        768: {
          slidesPerView: 4,
          spaceBetween: 15,
        },
        1024: {
          slidesPerView: 2,
          spaceBetween: 15,
        },
        1200: {
          slidesPerView: 3,
          spaceBetween: 15,
        },
        1400: {
          slidesPerView: 4,
          spaceBetween: 15,
        },
      }
    });
  });
</script>
{% schema %}
{
  "name": "Giiker Recommended",
  "settings": [
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "You may also like"
    },
    {
      "type": "product_list",
      "id": "product_list",
      "label": "Product List"
    }
  ],
  "blocks": [
    {
      "type": "list",
      "name": "List", 
      "settings": [
        {
          "type": "image_picker",
          "id": "product_image", 
          "label": "Product Image" 
        }, 
        {
          "type": "richtext",
          "id": "product_title",
          "label": "Product Title"
        }
      ]
    }
  ], 
  "presets": [
    {
      "name": "Giiker Product Recommended"  
    }
  ]
}
{% endschema %}